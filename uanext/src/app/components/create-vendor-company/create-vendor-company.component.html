<div class="container">
  <div class="row">
    <div class="col-md-6 offset-md-3">

      <form [formGroup]="vendorCompanyForm" (ngSubmit)="onSubmit()">
        <h1>Create a new project</h1>

        <div class="form-group">
          <label>Name</label>
          <input type="text" formControlName="name" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.name.errors }" />
          <div *ngIf="formControls.name.errors" class="invalid-feedback">
            <div *ngIf="formControls.name.errors.required">Name cannot be empty</div>
          </div>
        </div>

        <div class="form-group avatar">
          <img #avatar2 height=100 src={{emptyAvatar}} alt="avatar">
          <label>Avatar</label>
          <input (change)="handleAvatarSelect($event)" type="file" accept="image/*" formControlName="avatar" class="form-control"
            [ngClass]="{ 'is-invalid': (submitted && formControls.avatar.errors) || (avatarIsTouched && formControls.avatar.errors)}" />
          <div *ngIf="formControls.avatar.errors" class="invalid-feedback">
            <div *ngIf="formControls.avatar.errors.required">Avatar cannot be empty</div>
            <div *ngIf="formControls.avatar.errors.maxAvatarSizeErr">Max avatar size is 5Mb</div>
            <div *ngIf="formControls.avatar.errors.avatarNotUploaded">Upload selected avatar</div>
          </div>
          <mat-progress-bar *ngIf="showAvatarProgress === true" mode="indeterminate"></mat-progress-bar>
          <button type="button" (click)="uploadAvatar()" class="btn btn-primary">Upload avatar</button>
        </div>

        <div class="form-group">
          <label>Legal entity name</label>
          <input type="text" formControlName="legalEntityName" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.legalEntityName.errors }" />
          <div *ngIf="formControls.legalEntityName.errors" class="invalid-feedback">
            <div *ngIf="formControls.legalEntityName.errors.required">Legal entity name cannot be empty</div>
          </div>
        </div>

        <div class="form-group">
          <label for="vendor-goal-textarea">Goal</label>
          <textarea id="vendor-goal-textarea" rows="3" formControlName="goal" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.goal.errors }"></textarea>
          <div *ngIf="formControls.goal.errors" class="invalid-feedback">
            <div *ngIf="formControls.goal.errors.required">goal cannot be empty</div>
            <div *ngIf="formControls.goal.errors.minlength">Minimal length is 200 charset</div>
            <div *ngIf="formControls.goal.errors.maxlength">Maximal length is 1024 charset</div>
          </div>
        </div>

        <app-step-or-video [parentSubmitted]="submitted" content="step" [minItemsCount]=3 [maxItemsCount]=15 (itemsEvent)="stepsEventHandler($event)"></app-step-or-video>

        <app-step-or-video [parentSubmitted]="submitted" content="video" [minItemsCount]=1 [maxItemsCount]=10 (itemsEvent)="videosEventHandler($event)"></app-step-or-video>

        <div class="form-group">
          <label>Address</label>
          <input type="text" formControlName="address" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.address.errors }" />
          <div *ngIf="formControls.address.errors" class="invalid-feedback">
            <div *ngIf="formControls.address.errors.required">Address cannot be empty</div>
          </div>
        </div>

        <div class="form-group">
          <label>Region</label>
          <input type="text" formControlName="region" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.region.errors }" />
          <div *ngIf="formControls.region.errors" class="invalid-feedback">
            <div *ngIf="formControls.region.errors.required">Region cannot be empty</div>
          </div>
        </div>

        <div class="form-group">
          <label>Field of activity</label>
          <input type="text" formControlName="fieldOfActivity" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.fieldOfActivity.errors }" />
          <div *ngIf="formControls.fieldOfActivity.errors" class="invalid-feedback">
            <div *ngIf="formControls.fieldOfActivity.errors.required">Field of activity cannot be empty</div>
          </div>
        </div>

        <div class="form-group">
          <label>Field of activity</label>
          <input type="text" formControlName="fieldOfActivity" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.fieldOfActivity.errors }" />
          <div *ngIf="formControls.fieldOfActivity.errors" class="invalid-feedback">
            <div *ngIf="formControls.fieldOfActivity.errors.required">Field of activity cannot be empty</div>
          </div>
        </div>

        <div class="form-group">
          <label>Company age</label>
          <input type="number" min=0 formControlName="companyAge" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.companyAge.errors }" />
          <div *ngIf="formControls.companyAge.errors" class="invalid-feedback">
            <div *ngIf="formControls.companyAge.errors.required">Company age cannot be empty</div>
          </div>
        </div>

        <div class="form-group">
          <label>Employees number</label>
          <select type="number" min=0 formControlName="employeesNumber" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.employeesNumber.errors }">
            <option value="1">0-1</option>
            <option value="5">2-5</option>
            <option value="10">6-10</option>
            <option value="25">11-25</option>
            <option value="50">26-50</option>
            <option value="100">51-100</option>
            <option value="101">100+</option>
          </select>
          <div *ngIf="formControls.employeesNumber.errors" class="invalid-feedback">
            <div *ngIf="formControls.employeesNumber.errors.required">Specify employees number</div>
          </div>
        </div>

        <div class="form-group">
          <label>Employees to hire</label>
          <input type="number" min=0 formControlName="employeesToHire" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.employeesToHire.errors }" />
          <div *ngIf="formControls.employeesToHire.errors" class="invalid-feedback">
            <div *ngIf="formControls.employeesToHire.errors.required">Specify count employees to hire</div>
          </div>
        </div>

        <div class="form-group">
          <label>Gross income</label>
          <select type="number" min=0 formControlName="grossIncome" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.grossIncome.errors }">
            <option value="0">0</option>
            <option value="100">100</option>
          </select>
          <div *ngIf="formControls.grossIncome.errors" class="invalid-feedback">
            <div *ngIf="formControls.grossIncome.errors.required">Specify gross income</div>
          </div>
        </div>

        <div class="form-group">
          <label>Average price</label>
          <input type="number" formControlName="averagePrice" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.averagePrice.errors }" />
          <div *ngIf="formControls.averagePrice.errors" class="invalid-feedback">
            <div *ngIf="formControls.averagePrice.errors.required">Average price cannot be empty</div>
          </div>
        </div>

        <div class="form-group">
          <label>Average check</label>
          <input type="number" formControlName="averageCheck" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.averageCheck.errors }" />
          <div *ngIf="formControls.averageCheck.errors" class="invalid-feedback">
            <div *ngIf="formControls.averageCheck.errors.required">Average check cannot be empty</div>
          </div>
        </div>

        <div class="form-group">
          <label>Clients count per mount</label>
          <input type="number" formControlName="mounthlyClients" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.mounthlyClients.errors }" />
          <div *ngIf="formControls.mounthlyClients.errors" class="invalid-feedback">
            <div *ngIf="formControls.mounthlyClients.errors.required">Clients count per mount cannot be empty</div>
          </div>
        </div>

        <div class="form-group">
          <label>Description</label>
          <input type="text" formControlName="description" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.description.errors }" />
          <div *ngIf="formControls.description.errors" class="invalid-feedback">
            <div *ngIf="formControls.description.errors.required">Business description cannot be empty</div>
            <div *ngIf="formControls.description.errors.maxlength">Business description length cannot be
              largest than 1024 chars</div>
          </div>
        </div>

        <div class="form-group">
          <label>Investment description</label>
          <textarea rows=3 formControlName="investmentDescription" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.investmentDescription.errors }"></textarea>
          <div *ngIf="formControls.investmentDescription.errors" class="invalid-feedback">
            <div *ngIf="formControls.investmentDescription.errors.required">Investment description cannot be empty</div>
            <div *ngIf="formControls.investmentDescription.errors.maxlength">Investment description length cannot be
              largest than 4096 chars</div>
          </div>
        </div>

        <div class="form-group">
          <label>How much money required</label>
          <input type="number" formControlName="moneyRequired" class="form-control" [ngClass]="{ 'is-invalid': submitted && formControls.moneyRequired.errors }" />
          <div *ngIf="formControls.moneyRequired.errors" class="invalid-feedback">
            <div *ngIf="formControls.moneyRequired.errors.required">Specify how much money required</div>
          </div>
        </div>

        <div class="form-group">
          <div class="photos-uploader">
            <app-file-uploader [parentSubmitted]="submitted" accept="image/*" content="photos" minCount=5
              (filesUploadedEvent)="photosUploaded($event)"></app-file-uploader>
          </div>
          <input style="display:none" type="text" formControlName="forPhotos" />
        </div>

        <div class="form-group">
          <div class="files-uploader">
            <app-file-uploader [parentSubmitted]="submitted" accept="*" content="files"
              (filesUploadedEvent)="filesUploaded($event)"></app-file-uploader>
          </div>
          <input style="display:none" type="text" formControlName="forFiles" />
        </div>

        <div class="form-group">
          <button [disabled]="submitted && !vendorCompanyForm.valid" class="btn btn-success">Create company</button>
        </div>
      </form>

    </div>
  </div>
</div>


<button (click)="getFormControls()">getFormControls</button>
